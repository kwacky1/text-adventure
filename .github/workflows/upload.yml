name: Upload to itch.io

on: 
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  upload-new-version:
    runs-on: ubuntu-latest

    steps:
    - name: Check out repository
      uses: actions/checkout@v4

    - name: Upload to itch.io
      uses: Ayowel/butler-to-itch@fe309f460564d406d71dac3654d758a9aa4a57f9 # v1
      with:
        butler_key: ${{ secrets.ITCH_TOKEN }}
        itch_user: goosey-games
        itch_game: the-wanderers
        version: ${{ github.sha }}
        files: |
          html the-wanderers

